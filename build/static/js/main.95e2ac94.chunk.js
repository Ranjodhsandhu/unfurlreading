(this.webpackJsonpunfurlreading=this.webpackJsonpunfurlreading||[]).push([[0],{102:function(e,a,t){e.exports=t(116)},107:function(e,a,t){},109:function(e,a,t){},116:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=(t(107),t(13)),l=t.n(i),s=t(19),u=t(11),m=(t(109),t(80)),d=t(14),p=t(68),f=t(153);function g(){return r.a.createElement(p.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(f.a,{color:"inherit",href:"unfurlreading.ranjodhsandhu.com"},"Unfurl Reading")," ",(new Date).getFullYear(),".")}var h=t(174),b=t(159),E=t(156),v=t(169),k=t(157),x=t(171),y=t(160),j=t(170),O=t(60),w=t.n(O),C=t(154),S=t(155),N=t(173),B=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function T(e){var a=B(),t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],i=o[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),O=d[0],C=d[1],T=Object(n.useState)(""),D=Object(u.a)(T,2),W=D[0],M=D[1],I=function(){var a=Object(s.a)(l.a.mark((function a(t){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,fetch("/api/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:O})});case 3:return n=a.sent,a.next=6,n.json();case 6:if(r=a.sent,n.ok){a.next=15;break}if(!(n.status>=500)){a.next=11;break}return M("Something went wrong, Please try again."),a.abrupt("return");case 11:if(!(n.status>=400)){a.next=14;break}return M(r.message),a.abrupt("return");case 14:throw new Error(r.message);case 15:e.getUser();case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!W,autoHideDuration:2e3,message:r.a.createElement("span",{id:"message-id"},r.a.createElement(p.a,{color:"error"},W)),onClose:function(){M("")}}),r.a.createElement("div",{className:a.paper},r.a.createElement(h.a,{className:a.avatar},r.a.createElement(w.a,null)),r.a.createElement(p.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:I},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){i(e.target.value)}}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:O,onChange:function(e){C(e.target.value)}}),r.a.createElement(k.a,{control:r.a.createElement(x.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"),r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,xs:!0}),r.a.createElement(y.a,{item:!0},r.a.createElement(f.a,{href:"/signup",variant:"body2"},'"Don\'t have an account? Sign Up"'))))),r.a.createElement(j.a,{mt:8},r.a.createElement(g,null)))}var D=t(161),W=t(162),M=t(163),I=t(165),P=t(164),R=Object(C.a)((function(e){return{mainContainer:{display:"flex",flexDirection:"column",alignItems:"center"},root:{paddingTop:10,paddingBottom:10,maxWidth:270,minWidth:270,maxHeight:400,minHeight:400},bookContainer:{maxWidth:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},book:{display:"flex",flexDirection:"column"},media:{height:140,width:100},cardMedia:{paddingTop:"56.25%"},snackMessage:{color:"#fff"},snackText:{display:"block",textAlign:"center",color:"#fff",background:"#000",padding:10,borderRadius:5,width:"200px"}}}));var U=function(e){var a=e.book,t=e.getMyBooks,o=R(),c=a||"",i=c._id,m=c.name,d=c.author,f=c.thumbnail,g=Object(n.useState)(!1),h=Object(u.a)(g,2),v=h[0],k=h[1];function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(a){return setTimeout(a,e)}))}var y=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/books/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,name:m,author:d,thumbnail:f})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,n.ok){e.next=9;break}throw new Error(r.message);case 9:return k(!0),e.next=12,x(1e3);case 12:t();case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:o.mainContainer},r.a.createElement(E.a,null),r.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!v,autoHideDuration:1e3,className:o.snackMessage,message:"",onClose:function(){k(!1)}},r.a.createElement("span",{id:"message-id"},r.a.createElement(p.a,{className:o.snackText},"Removing Book"))),r.a.createElement(D.a,{className:o.root},r.a.createElement(W.a,{className:o.bookContainer},r.a.createElement(M.a,{className:o.book},r.a.createElement(P.a,{className:o.media,image:f,title:"Book Cover"}),r.a.createElement(W.a,null,r.a.createElement(p.a,{gutterBottom:!0,variant:"h6",component:"h3"},m),r.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},"By ".concat(d)))),r.a.createElement(I.a,{onClick:y},r.a.createElement(b.a,{size:"small",color:"primary"},"Remove From Library")))))},A=Object(C.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));function z(e){var a=e.books,t=e.getMyBooks,n=A();return r.a.createElement(S.a,{className:n.cardGrid,maxWidth:"md"},r.a.createElement(y.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},a&&a.length>0?a.map((function(e){return r.a.createElement(y.a,{xs:12,sm:6,md:4,item:!0,key:e._id},r.a.createElement(U,{book:e,getMyBooks:t}))})):"Please add Books to your library"))}var G=t(166),H=t(77),J=t.n(H),L=t(158),q=Object(C.a)((function(e){return{searchWrapper:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},searchGrid:{width:"45ch",display:"flex",flexDirection:"row"},searchButton:{marginLeft:10,width:100}}}));var F=function(e){var a=e.handleSubmit,t=q(),o=Object(n.useState)(""),c=Object(u.a)(o,2),i=c[0],l=c[1],s=function(e){e.preventDefault(),l("")};return r.a.createElement("div",{className:t.searchWrapper},r.a.createElement("form",{className:t.searchGrid,noValidate:!0,autoComplete:"off",onSubmit:a},r.a.createElement(v.a,{id:"search",name:"search",label:"Enter Book or Author Name",value:i,onChange:function(e){e.preventDefault(),l(e.target.value)},fullWidth:!0,variant:"outlined",size:"small",InputProps:{endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(L.a,{"aria-label":"delete text",onClick:s,onMouseDown:s,edge:"end",color:"primary"},r.a.createElement(J.a,{fontSize:"small"})))}}),r.a.createElement(b.a,{className:t.searchButton,variant:"outlined",color:"primary",type:"submit",fullWidth:!1,size:"small"},"Search")))},V=Object(C.a)((function(e){return{mainContainer:{display:"flex",flexDirection:"column",alignItems:"center"},root:{paddingTop:10,paddingBottom:10,maxWidth:270,minWidth:270,maxHeight:400,minHeight:400},bookContainer:{maxWidth:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},book:{display:"flex",flexDirection:"column"},media:{height:140,width:100},cardMedia:{paddingTop:"56.25%"},snackMessage:{color:"#fff"},snackText:{display:"block",textAlign:"center",color:"#fff",background:"#000",padding:10,borderRadius:5,width:"200px"}}}));var _=function(e){var a=e.book,t=e.user,o=e.getMyBooks,c=V(),i=(a.volumeInfo.imageLinks||"").thumbnail,m=a.volumeInfo.title,d=a.volumeInfo.authors||"General Public",f=a.searchInfo,g=f?f.textSnippet||"":"No Summary",h=t.id,v=Object(n.useState)(!1),k=Object(u.a)(v,2),x=k[0],y=k[1],j=function(){var e=Object(s.a)(l.a.mark((function e(a){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/books/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookData:{name:m,author:d,summary:g,thumbnail:i,userId:h}})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=9;break}throw new Error(n.message);case 9:y(!0),o();case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:c.mainContainer},r.a.createElement(E.a,null),r.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!x,autoHideDuration:1e3,className:c.snackMessage,message:"",onClose:function(){y(!1)}},r.a.createElement("span",{id:"message-id"},r.a.createElement(p.a,{className:c.snackText},"Book Added"))),r.a.createElement(D.a,{className:c.root},r.a.createElement(W.a,{className:c.bookContainer},r.a.createElement(M.a,{className:c.book},r.a.createElement(P.a,{className:c.media,image:i,title:"Book Cover"}),r.a.createElement(W.a,null,r.a.createElement(p.a,{gutterBottom:!0,variant:"h6",component:"h3"},m),r.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},"By ".concat(d)))),r.a.createElement(I.a,{onClick:j},r.a.createElement(b.a,{size:"small",color:"primary"},"Add To Library")))))},Y=Object(C.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));var $=function(e){var a=e.user,t=e.books,n=e.getMyBooks,o=Y();return r.a.createElement("div",null,r.a.createElement(S.a,{className:o.cardGrid,maxWidth:"md"},r.a.createElement(y.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},t&&t.length>0?t.map((function(e){return r.a.createElement(y.a,{xs:12,sm:6,md:4,item:!0,key:e.id},r.a.createElement(_,{user:a,book:e,getMyBooks:n}))})):null)))},K=Object(C.a)((function(e){return{footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[200]}}}));function Q(){var e=K();return r.a.createElement("footer",{className:e.footer},r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(p.a,{variant:"body1"},"Design using Material UI @ Juno College"),r.a.createElement(g,null)))}var X=t(81),Z=t(175),ee=t(78),ae=t.n(ee),te=Object(C.a)((function(e){return{icon:{marginRight:e.spacing(2),color:"#fff"}}}));function ne(e){var a=e.setShowMyBooks,t=e.setShowSearch,n=te(),o=r.a.useState(null),c=Object(u.a)(o,2),i=c[0],l=c[1];return r.a.createElement("div",null,r.a.createElement(b.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},r.a.createElement(ae.a,{className:n.icon})),r.a.createElement(X.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){l(null)}},r.a.createElement(Z.a,{onClick:function(){l(null),a(!0),t(!1)}},"My Library"),r.a.createElement(Z.a,{onClick:function(){l(null),a(!1),t(!0)}},"Search Books")))}var re=t(167),oe=t(168),ce=t(79),ie=t.n(ce),le=Object(C.a)((function(e){return{icon:{marginRight:e.spacing(2)},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexWrap:"wrap"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},title:{flexGrow:1},snackMessage:{color:"#fff"},snackText:{display:"block",textAlign:"center",color:"#fff",background:"#000",padding:10,borderRadius:5,width:"200px"}}}));var se=function(e){var a=le(),t=e.signOut,o=e.user,c=o.id,i=Object(n.useState)(""),m=Object(u.a)(i,2),d=m[0],f=m[1],g=Object(n.useState)([]),h=Object(u.a)(g,2),v=h[0],k=h[1],x=Object(n.useState)([]),y=Object(u.a)(x,2),j=y[0],O=y[1],w=Object(n.useState)(!1),C=Object(u.a)(w,2),S=C[0],B=C[1],T=Object(n.useState)(!0),D=Object(u.a)(T,2),W=D[0],M=D[1],I=Object(n.useState)(!1),P=Object(u.a)(I,2),R=P[0],U=P[1],A=Object(n.useReducer)((function(e){return e+1}),0),G=Object(u.a)(A,2)[1],H=Object(n.useRef)(),J=Object(n.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(a){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a||"Popular","&projection=lite&orderby=newest"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.items,k(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Google Books Search"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),[]);Object(n.useEffect)((function(){H.current?(J(d),G()):(H.current=!0,J())}),[J,d]);var L=Object(n.useCallback)(Object(s.a)(l.a.mark((function e(){var a,t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/books/".concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:if(t=e.sent,n=t.data,a.ok){e.next=10;break}throw new Error("Could not get books");case 10:O(n),U(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[c]);return Object(n.useEffect)((function(){H.current||(H.current=!0),L()}),[L]),r.a.createElement("div",{className:a.root},r.a.createElement(E.a,null),r.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!R,autoHideDuration:1e3,className:a.snackMessage,onClose:function(){U(!1)}},r.a.createElement("span",{id:"message-id"},r.a.createElement(p.a,{className:a.snackText},"Library Updated"))),r.a.createElement(re.a,{position:"relative"},r.a.createElement(oe.a,null,r.a.createElement(ne,{setShowMyBooks:B,setShowSearch:M}),r.a.createElement(p.a,{variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Unfurl Reading"),r.a.createElement(b.a,{color:"inherit",onClick:t},r.a.createElement(ie.a,null)))),r.a.createElement("div",null,S&&r.a.createElement("div",null,r.a.createElement("h3",null,"My Library"),r.a.createElement(z,{user:o,books:j,getMyBooks:L})),W&&r.a.createElement("div",null,r.a.createElement("h3",null,"Search For Books"),r.a.createElement(F,{handleSubmit:function(e){e.preventDefault();var a=e.target[0].value;f(a)}}),r.a.createElement($,{user:o,searchTerm:d,books:v,getMyBooks:L}))),r.a.createElement(Q,null))},ue=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function me(e){var a=ue(),t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],i=o[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),k=d[0],x=d[1],O=Object(n.useState)(""),C=Object(u.a)(O,2),N=C[0],B=C[1],T=Object(n.useState)(""),D=Object(u.a)(T,2),W=D[0],M=D[1];function I(){return(I=Object(s.a)(l.a.mark((function a(){var t,n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t={email:c,password:k,firstName:N,lastName:W},a.next=4,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return n=a.sent,a.next=7,n.json();case 7:if(r=a.sent,n.ok){a.next=10;break}throw new Error(r.message);case 10:return a.next=12,fetch("/api/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:k})});case 12:if(a.sent.ok){a.next=15;break}throw new Error(r.message);case 15:e.getUser(),a.next=23;break;case 18:a.prev=18,a.t0=a.catch(0),console.log(" error? "),e.updateUser(void 0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,18]])})))).apply(this,arguments)}return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(h.a,{className:a.avatar},r.a.createElement(w.a,null)),r.a.createElement(p.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){I.apply(this,arguments)}()}},r.a.createElement(y.a,{container:!0,spacing:2},r.a.createElement(y.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:N,onChange:function(e){return B(e.target.value)}})),r.a.createElement(y.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:W,onChange:function(e){return M(e.target.value)}})),r.a.createElement(y.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:function(e){return i(e.target.value)}})),r.a.createElement(y.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:k,onChange:function(e){return x(e.target.value)}}))),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(y.a,{container:!0,justifyContent:"flex-end"},r.a.createElement(y.a,{item:!0},r.a.createElement(f.a,{href:"/signin",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(j.a,{mt:5},r.a.createElement(g,null)))}var de=function(){var e=Object(n.useState)(void 0),a=Object(u.a)(e,2),t=a[0],o=a[1],c=Object(n.useCallback)(Object(s.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/me");case 3:return a=e.sent,e.next=6,a.json();case 6:if(t=e.sent,a.ok){e.next=9;break}throw new Error(t.message);case 9:o(t.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message+" user not allowed"),o(void 0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]);Object(n.useEffect)((function(){c()}),[c]),Object(n.useEffect)((function(){document.title="Unfurl Reading"}),[]);var i=function(){var e=Object(s.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/users/signout").then((function(){o(void 0)}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/signin",render:function(e){return t?r.a.createElement(d.a,{to:"/"}):r.a.createElement(T,Object.assign({getUser:c},e))}}),r.a.createElement(d.b,{exact:!0,path:"/signup",render:function(e){return t?r.a.createElement(d.a,{to:"/"}):r.a.createElement(me,Object.assign({getUser:c,updateUser:o},e))}}),r.a.createElement(d.b,{path:"/",render:function(e){return t?r.a.createElement(se,Object.assign({},e,{signOut:i,user:t})):r.a.createElement(d.a,{to:"/signin"})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.95e2ac94.chunk.js.map