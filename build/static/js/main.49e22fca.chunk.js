(this.webpackJsonpunfurlreading=this.webpackJsonpunfurlreading||[]).push([[0],{100:function(e,a,t){e.exports=t(114)},105:function(e,a,t){},107:function(e,a,t){},114:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=(t(105),t(12)),l=t.n(i),s=t(19),u=t(13),m=(t(107),t(78)),p=t(14),d=t(66),f=t(152);function g(){return r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(f.a,{color:"inherit",href:"unfurlreading.ranjodhsandhu.com"},"Unfurl Reading")," ",(new Date).getFullYear(),".")}var h=t(173),b=t(158),v=t(155),E=t(168),y=t(156),k=t(170),x=t(159),j=t(169),w=t(56),O=t.n(w),C=t(153),S=t(154),N=t(172),B=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function W(e){var a=B(),t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],i=o[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),w=p[0],C=p[1],W=Object(n.useState)(""),T=Object(u.a)(W,2),D=T[0],I=T[1],M=function(){var a=Object(s.a)(l.a.mark((function a(t){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,fetch("/api/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:w})});case 3:return n=a.sent,a.next=6,n.json();case 6:if(r=a.sent,n.ok){a.next=15;break}if(!(n.status>=500)){a.next=11;break}return I("Something went wrong, Please try again."),a.abrupt("return");case 11:if(!(n.status>=400)){a.next=14;break}return I(r.message),a.abrupt("return");case 14:throw new Error(r.message);case 15:e.getUser();case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(v.a,null),r.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!D,autoHideDuration:2e3,message:r.a.createElement("span",{id:"message-id"},r.a.createElement(d.a,{color:"error"},D)),onClose:function(){I("")}}),r.a.createElement("div",{className:a.paper},r.a.createElement(h.a,{className:a.avatar},r.a.createElement(O.a,null)),r.a.createElement(d.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:M},r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){i(e.target.value)}}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:w,onChange:function(e){C(e.target.value)}}),r.a.createElement(y.a,{control:r.a.createElement(k.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"),r.a.createElement(x.a,{container:!0},r.a.createElement(x.a,{item:!0,xs:!0}),r.a.createElement(x.a,{item:!0},r.a.createElement(f.a,{href:"/signup",variant:"body2"},'"Don\'t have an account? Sign Up"'))))),r.a.createElement(j.a,{mt:8},r.a.createElement(g,null)))}var T=t(160),D=t(161),I=t(162),M=t(164),U=t(163),P=Object(C.a)((function(e){return{mainContainer:{display:"flex",flexDirection:"column",alignItems:"center"},root:{paddingTop:10,paddingBottom:10,maxWidth:270,minWidth:270,maxHeight:400,minHeight:400},bookContainer:{maxWidth:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},book:{display:"flex",flexDirection:"column"},media:{height:140,width:100},cardMedia:{paddingTop:"56.25%"}}}));var R=function(e){var a=e.book,t=e.getMyBooks,n=P(),o=a||"",c=o._id,i=o.name,u=o.author,m=o.thumbnail,p=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/books/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c,name:i,author:u,thumbnail:m})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,n.ok){e.next=9;break}throw new Error(r.message);case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:n.mainContainer},r.a.createElement(T.a,{className:n.root},r.a.createElement(D.a,{className:n.bookContainer},r.a.createElement(I.a,{className:n.book},r.a.createElement(U.a,{className:n.media,image:m,title:"Book Cover"}),r.a.createElement(D.a,null,r.a.createElement(d.a,{gutterBottom:!0,variant:"h6",component:"h3"},i),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},"By ".concat(u)))),r.a.createElement(M.a,{onClick:p},r.a.createElement(b.a,{size:"small",color:"primary"},"Remove From Library")))))},G=Object(C.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));function J(e){var a=e.books,t=e.getMyBooks,n=G();return r.a.createElement(S.a,{className:n.cardGrid,maxWidth:"md"},r.a.createElement(x.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},a&&a.length>0?a.map((function(e){return r.a.createElement(x.a,{xs:12,sm:6,md:4,item:!0,key:e._id},r.a.createElement(R,{book:e,getMyBooks:t}))})):"Please add Books to your library"))}var L=t(165),q=t(76),A=t.n(q),z=t(157),F=Object(C.a)((function(e){return{searchWrapper:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},searchGrid:{width:"45ch",display:"flex",flexDirection:"row"},searchButton:{marginLeft:10,width:100}}}));var H=function(e){var a=e.handleSubmit,t=F(),o=Object(n.useState)("javascript"),c=Object(u.a)(o,2),i=c[0],l=c[1],s=function(e){e.preventDefault(),l("")};return r.a.createElement("div",{className:t.searchWrapper},r.a.createElement("form",{className:t.searchGrid,noValidate:!0,autoComplete:"off",onSubmit:a},r.a.createElement(E.a,{id:"search",name:"search",label:"Enter Book or Author Name",value:i,onChange:function(e){e.preventDefault(),l(e.target.value)},fullWidth:!0,variant:"outlined",size:"small",InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(z.a,{"aria-label":"delete text",onClick:s,onMouseDown:s,edge:"end",color:"primary"},r.a.createElement(A.a,{fontSize:"small"})))}}),r.a.createElement(b.a,{className:t.searchButton,variant:"outlined",color:"primary",type:"submit",fullWidth:!1,size:"small"},"Search")))},V=Object(C.a)((function(e){return{mainContainer:{display:"flex",flexDirection:"column",alignItems:"center"},root:{paddingTop:10,paddingBottom:10,maxWidth:270,minWidth:270,maxHeight:400,minHeight:400},bookContainer:{maxWidth:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},book:{display:"flex",flexDirection:"column"},media:{height:140,width:100},cardMedia:{paddingTop:"56.25%"}}}));var _=function(e){var a=e.book,t=e.user,n=e.getMyBooks,o=V(),c=(a.volumeInfo.imageLinks||"").thumbnail,i=a.volumeInfo.title,u=a.volumeInfo.authors,m=a.searchInfo,p=m?m.textSnippet||"":"No Summary",f=t.id,g=function(){var e=Object(s.a)(l.a.mark((function e(a){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/books/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookData:{name:i,author:u,summary:p,thumbnail:c,userId:f}})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,t.ok){e.next=9;break}throw new Error(r.message);case 9:n();case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:o.mainContainer},r.a.createElement(T.a,{className:o.root},r.a.createElement(D.a,{className:o.bookContainer},r.a.createElement(I.a,{className:o.book},r.a.createElement(U.a,{className:o.media,image:c,title:"Book Cover"}),r.a.createElement(D.a,null,r.a.createElement(d.a,{gutterBottom:!0,variant:"h6",component:"h3"},i),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},"By ".concat(u)))),r.a.createElement(M.a,{onClick:g},r.a.createElement(b.a,{size:"small",color:"primary"},"Add To Library")))))},Y=Object(C.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));var $=function(e){var a=e.user,t=e.books,n=e.getMyBooks,o=Y();return r.a.createElement("div",null,r.a.createElement(S.a,{className:o.cardGrid,maxWidth:"md"},r.a.createElement(x.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},t&&t.length>0?t.map((function(e){return r.a.createElement(x.a,{xs:12,sm:6,md:4,item:!0,key:e.id},r.a.createElement(_,{user:a,book:e,getMyBooks:n}))})):null)))},K=Object(C.a)((function(e){return{footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[200]}}}));function Q(){var e=K();return r.a.createElement("footer",{className:e.footer},r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(d.a,{variant:"body1"},"Design using Material UI @ Juno College"),r.a.createElement(g,null)))}var X=t(79),Z=t(174),ee=t(77),ae=t.n(ee),te=Object(C.a)((function(e){return{icon:{marginRight:e.spacing(2),color:"#fff"}}}));function ne(e){var a=e.setShowMyBooks,t=e.setShowSearch,n=te(),o=r.a.useState(null),c=Object(u.a)(o,2),i=c[0],l=c[1];return r.a.createElement("div",null,r.a.createElement(b.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},r.a.createElement(ae.a,{className:n.icon})),r.a.createElement(X.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){l(null)}},r.a.createElement(Z.a,{onClick:function(){l(null),a(!0),t(!1)}},"My Library"),r.a.createElement(Z.a,{onClick:function(){l(null),a(!1),t(!0)}},"Search Books")))}var re=t(166),oe=t(167),ce=Object(C.a)((function(e){return{icon:{marginRight:e.spacing(2)},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexWrap:"wrap"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},title:{flexGrow:1}}}));var ie=function(e){var a=ce(),t=e.signOut,o=e.user,c=o.id,i=Object(n.useState)(""),m=Object(u.a)(i,2),p=m[0],f=m[1],g=Object(n.useState)([]),h=Object(u.a)(g,2),E=h[0],y=h[1],k=Object(n.useState)([]),x=Object(u.a)(k,2),j=x[0],w=x[1],O=Object(n.useState)(!1),C=Object(u.a)(O,2),S=C[0],N=C[1],B=Object(n.useState)(!0),W=Object(u.a)(B,2),T=W[0],D=W[1],I=Object(n.useReducer)((function(e){return e+1}),0),M=Object(u.a)(I,2)[1],U=Object(n.useRef)(),P=Object(n.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(a){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a||"javascript","&projection=lite&orderby=newest"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.items,y(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Google Books Search"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),[]);Object(n.useEffect)((function(){U.current?(P(p),M()):(U.current=!0,P())}),[P,p]);var R=Object(n.useCallback)(Object(s.a)(l.a.mark((function e(){var a,t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/books/".concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:if(t=e.sent,n=t.data,a.ok){e.next=10;break}throw new Error("Could not get books");case 10:w(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),[c]);return Object(n.useEffect)((function(){U.current?(R(),M()):(U.current=!0,R())}),[R]),r.a.createElement("div",{className:a.root},r.a.createElement(v.a,null),r.a.createElement(re.a,{position:"relative"},r.a.createElement(oe.a,null,r.a.createElement(ne,{setShowMyBooks:N,setShowSearch:D}),r.a.createElement(d.a,{variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Unfurl Reading"),r.a.createElement(b.a,{color:"inherit",onClick:t},"Logout"))),r.a.createElement("div",null,S&&r.a.createElement("div",null,r.a.createElement("h3",null,"My Library"),r.a.createElement(J,{user:o,books:j,getMyBooks:R})),T&&r.a.createElement("div",null,r.a.createElement("h3",null,"Search For Books"),r.a.createElement(H,{handleSubmit:function(e){e.preventDefault();var a=e.target[0].value;f(a)}}),r.a.createElement($,{user:o,searchTerm:p,books:E,getMyBooks:R}))),r.a.createElement(Q,null))},le=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function se(e){var a=le(),t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],i=o[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),y=p[0],k=p[1],w=Object(n.useState)(""),C=Object(u.a)(w,2),N=C[0],B=C[1],W=Object(n.useState)(""),T=Object(u.a)(W,2),D=T[0],I=T[1];function M(){return(M=Object(s.a)(l.a.mark((function a(){var t,n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t={email:c,password:y,firstName:N,lastName:D},a.next=4,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return n=a.sent,a.next=7,n.json();case 7:if(r=a.sent,n.ok){a.next=10;break}throw new Error(r.message);case 10:return a.next=12,fetch("/api/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:y})});case 12:if(a.sent.ok){a.next=15;break}throw new Error(r.message);case 15:e.getUser(),a.next=23;break;case 18:a.prev=18,a.t0=a.catch(0),console.log(" error? "),e.updateUser(void 0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,18]])})))).apply(this,arguments)}return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(v.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(h.a,{className:a.avatar},r.a.createElement(O.a,null)),r.a.createElement(d.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){M.apply(this,arguments)}()}},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:N,onChange:function(e){return B(e.target.value)}})),r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:D,onChange:function(e){return I(e.target.value)}})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:function(e){return i(e.target.value)}})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:y,onChange:function(e){return k(e.target.value)}}))),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(x.a,{container:!0,justifyContent:"flex-end"},r.a.createElement(x.a,{item:!0},r.a.createElement(f.a,{href:"/signin",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(j.a,{mt:5},r.a.createElement(g,null)))}var ue=function(){var e=Object(n.useState)(void 0),a=Object(u.a)(e,2),t=a[0],o=a[1],c=Object(n.useCallback)(Object(s.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/me");case 3:return a=e.sent,e.next=6,a.json();case 6:if(t=e.sent,a.ok){e.next=9;break}throw new Error(t.message);case 9:o(t.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message+" user not allowed"),o(void 0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]);Object(n.useEffect)((function(){c()}),[c]),Object(n.useEffect)((function(){document.title="Unfurl Reading"}),[]);var i=function(){var e=Object(s.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/users/signout").then((function(){o(void 0)}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/signin",render:function(e){return t?r.a.createElement(p.a,{to:"/"}):r.a.createElement(W,Object.assign({getUser:c},e))}}),r.a.createElement(p.b,{exact:!0,path:"/signup",render:function(e){return t?r.a.createElement(p.a,{to:"/"}):r.a.createElement(se,Object.assign({getUser:c,updateUser:o},e))}}),r.a.createElement(p.b,{path:"/",render:function(e){return t?r.a.createElement(ie,Object.assign({},e,{signOut:i,user:t})):r.a.createElement(p.a,{to:"/signin"})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.49e22fca.chunk.js.map